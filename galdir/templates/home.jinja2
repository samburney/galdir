{% extends "layouts/default.jinja2" %} 

{% block content %}
{% set path_parts = ['Home'] %}
{% if request.matchdict['path'] is defined and request.matchdict['path'] != '' %}
{% set path_parts = path_parts + request.matchdict['path'].split('/') %}
{% endif %}
<ol class="breadcrumb">
{% for part in path_parts %}
{% if loop.index == path_parts|length %}
  <li class="active">{{part}}</li>
{% else %}
  <li><a href="{{request.route_url('view', path=(path_parts[1:loop.index])|join('/'))}}">{{part}}</a></li>
{% endif %}
{% endfor %}
</ol>
<div class="h3">{{ path_parts[-1] }}</div>
{% if directories|length %}
<div class="h4">Albums</div>
<div class="row">
    {% for directory in directories %}
    <div class="col-sm-6 col-md-3 col-lg-2">
      <div class="img-thumbnail">
        <a href="/view/{{directory.path}}">
            <img src="/dirthumb/{{directory.path}}-150.png" />
        </a>
        <div class="caption">
          <h5 class="text-center">{{directory.path|split(-1, '/')}}</h5>
        </div>
      </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{% if files|length %}
<div class="h4">Images</div>
<div class="row">
    {% for file in files %}
    <div class="col-sm-6 col-md-4 col-lg-3">
      <div class="img-thumbnail">
        <a href="/albums/{{file.path}}">
            <img src="/viewimage/{%if file.namesplit.file_dir %}{{file.namesplit.file_dir}}/{%endif%}{{file.namesplit.file_name}}-250.{{file.namesplit.file_ext}}" />
        </a>
        <div class="caption">
          <h5 class="text-center">{{file.namesplit.file_name|truncate(30)}}</h5>
        </div>
      </div>
    </div>
    {% endfor %}
</div>
{% if pagination.total > 1 %}
<div class="row text-center">
  <nav aria-label="Page navigation">
    <ul class="pagination">
{% if pagination.number == 1 %}
      <li class="disabled">
        <span aria-hidden="true">&laquo;</span>
      </li>
{% else %}
      <li>
        <a href="{{request.path_url}}?page={{pagination.number - 1}}" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
{% endif %}
{% for page in range(1, pagination.total + 1) %}
      <li{% if page == pagination.number %} class="active"{% endif %}><a href="{{request.path_url}}?page={{page}}">{{page}}</a></li>
{% endfor %}
{% if pagination.number >= pagination.total %}
      <li class="disabled">
        <span aria-hidden="true">&raquo;</span>
      </li>
{% else %}
      <li>
        <a href="{{request.path_url}}?page={{pagination.number + 1}}" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
{% endif %}
    </ul>
  </nav>
</div>
{% endif %}
{% endif %}
{% endblock content %}